{"version":3,"sources":["assets\\GameBundles\\Solitaire\\Script\\Logic\\SolitaireLogic.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { SolitaireAutoPlayerDataCache } from \"../DataCache/SolitaireAutoPlayerDataCache\";\nimport { SolitaireDataCache } from \"../DataCache/SolitaireDataCache\";\nimport { SolitaireSkinDataCache } from \"../DataCache/SolitaireSkinDataCache\";\nimport { SolitaireJu } from \"../Game/Model/SolitaireJu\";\nimport { SolitaireCfg } from \"../SolitaireCfg\";\n\n/**\n * 游戏逻辑控制器\n */\nexport abstract class SolitaireLogic extends ii.Logic {\n    static get dataCache(): SolitaireDataCache { return this.GetDataCache(SolitaireCfg.SOLITAIRE_DATACACHE); }\n    static get skin(): SolitaireSkinDataCache { return this.GetDataCache(SolitaireCfg.SOLITAIRE_SKIN_DATACACHE); }\n    static get player(): SolitaireAutoPlayerDataCache { return this.GetDataCache(SolitaireCfg.SOLITAIRE_AUTOPLAYER_DATACACHE); }\n\n    //#region //! 广告接口\n    private static readonly WATCH_AD_REWARDED_COINS: number = 30;\n    // 看广告底层接口；\n    static WatchAD(msg: string, onRewarded: ii.VoidFunction) {\n        if(!ii.App.ins.p.ad.IsRewardedVideoAvailable()) {\n            ii.UIMgr.ins.ShowMsg(\"solitaire.ad_is_not_available\");\n            return;\n        }\n        ii.UIMgr.ins.OpenDialog2(msg, null, ()=>{\n            ii.App.ins.p.ad.ShowRewardedVideo(()=>{\n                onRewarded();\n                ii.App.ins.p.user.SetGameCenterVal(\"WatchVideo\", ii.App.ins.p.user.GetGameCenterVal(\"WatchVideo\")+1);\n            });\n        });\n    }\n\n    //! 提示功能\n    static UseHint(ju: SolitaireJu) {\n        if(ju.HasOperationHint()){\n            ju.isHintedBV.v = true;\n            this.emitGlobal(SolitaireJu.event.EVENT_LEVEL_MODEL_USING_HINT)\n        }else{\n            ii.UIMgr.ins.ShowMsg(\"solitaire.no_hint\");\n        }\n    }\n\n    //! 帮助功能\n    static UseAutoPlayer(ju: SolitaireJu) {\n        if(ju.isHelpedBV.v) {\n            ju.isPlayerOpenedBV.v = true\n        }else{\n            let __UseAutoPlayer = ()=>{\n                --this.dataCache.helpBV.v;\n                ju.OnUseHelp();\n            }\n            if(this.dataCache.helpBV.v > 0){\n                __UseAutoPlayer()\n            }else{\n               // this.WatchAD(ii.LangUtil.Get(\"solitaire.watch_ad_to_reward_help\"), ()=>{\n                    ++this.dataCache.helpBV.v;\n                    __UseAutoPlayer();\n                //});\n            }\n        }\n    }\n    //! 胜利\n    static HandleGameWin(ju: SolitaireJu, cb: ii.VoidFunction) {\n        this.dataCache.HandleGameWin(ju);\n        ii.Util.safeCall(cb);\n    }\n}\n"]}