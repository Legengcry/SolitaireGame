{"version":3,"sources":["assets\\GameBundles\\Solitaire\\Script\\_Public\\SolitaireActionUIPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nexport enum UIActionType {\n    POSITION = 0,\n    SCALE_OUT\n}\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default abstract class SolitaireActionUIPanel<ARGS=any> extends ii.UIPanel<ARGS> {\n    @property(cc.Node) private m_Background: cc.Node = null;\n    @property(cc.Node) private m_ActionNode: cc.Node = null;\n\n    protected GetBackground(): cc.Node { return this.m_Background; }\n    protected GetActionNode(): cc.Node { return this.m_ActionNode; }\n\n    protected EnterActionType(): UIActionType { return UIActionType.POSITION; }\n    protected EnterActionEasingType(): (t: number) => number { return cc.easing.backOut }\n    protected EnterSpeedFactor(): number { return 1; }\n    protected EnterBackgroundSeconds(): number { return 0.6 * this.EnterSpeedFactor(); }\n    protected EnterSeconds(): number { return 0.4 * this.EnterSpeedFactor(); }\n    protected EnterDelaySeconds(): number { return 0.3 * this.EnterSpeedFactor(); }\n    protected get EnterActionSeconds(): number { return this.EnterSeconds() + this.EnterDelaySeconds(); }\n\n    private m_OriginActionNodePosition: cc.Vec3 = null;\n    private m_OriginActionNodeOpacity: number = 0;\n    private m_OriginActionNodeScale: number = 1;\n    private m_OriginBackgroundOpacity: number = null;\n\n    protected OnCreate(): void {\n        switch (this.EnterActionType()) {\n            case UIActionType.SCALE_OUT:\n                this.m_OriginActionNodeScale = this.GetActionNode().scale;\n                this.m_OriginActionNodeOpacity = this.GetActionNode().opacity;\n                break;\n            default:\n                this.m_OriginActionNodePosition = this.GetActionNode().position;\n                break;\n        }\n        this.m_OriginBackgroundOpacity = this.GetBackground().opacity;\n        this.GetBackground().opacity = 0;\n    }\n    protected OnOpen(userData: any): void {\n        ii.UIUtil.showAction(this.GetBackground(), this.EnterBackgroundSeconds(), { opacity: this.m_OriginBackgroundOpacity })\n        switch (this.EnterActionType()) {\n            case UIActionType.SCALE_OUT:\n                this.GetActionNode().active = true;\n                this.GetActionNode().scale = 1;\n                this.GetActionNode().opacity = 0;\n                cc.tween(this.GetActionNode()).delay(this.EnterDelaySeconds()).set({opacity: this.m_OriginActionNodeOpacity}).to(this.EnterSeconds(), {opacity: 255}).start()\n                break;\n            default:\n                this.GetActionNode().position = this.m_OriginActionNodePosition;\n                ii.UIUtil.moveAction(this.GetActionNode(), true, this.m_OriginActionNodePosition, this.EnterSeconds(), ()=>this.OnEnter(), this.EnterDelaySeconds(), this.EnterActionEasingType())\n                break;\n        }\n    }\n    protected OnRelease(): void { }\n    protected ExitWithAction(cb: Function, isOpposite: boolean = false) {\n        const C_OUT_ACTION_TIME: number = 0.3;\n        const C_ACTION_TIME_DELAY_FADEOUT = 0.4;\n        switch (this.EnterActionType()) {\n            case UIActionType.SCALE_OUT:\n                cc.tween(this.GetActionNode())\n                    .to(C_OUT_ACTION_TIME, {scale: this.m_OriginActionNodeScale, opacity: this.m_OriginActionNodeOpacity}, {easing: cc.easing.backIn})\n                    .set({active: false})\n                    .start()\n                break;\n            default:\n                let targetPosition = isOpposite ? cc.v3(-this.m_OriginActionNodePosition.x, -this.m_OriginActionNodePosition.y, 0) : this.m_OriginActionNodePosition;\n                ii.UIUtil.moveAction(this.GetActionNode(), false, targetPosition, C_OUT_ACTION_TIME)\n                break;\n        }\n        ii.UIUtil.hideAction(this.GetBackground(), C_OUT_ACTION_TIME, { opacity: 0 }, ()=>{\n            this.Close()\n            if(cb) { cb() }\n        }, C_ACTION_TIME_DELAY_FADEOUT)\n    }\n    protected OnEnter() { }\n}\n"]}